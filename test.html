<html>
<head>

</head>
<body>
<div id="container" style="width:100%;height: 500px;border:1px solid black; padding: 20px;">
      <textarea id="textarea" style="width:100%;height:400px;">

        </textarea>
</div>
<script>
  function retrieveImageFromClipboardAsBlob (pasteEvent, callback) {
    if (!pasteEvent.clipboardData) {
      if (typeof (callback) == 'function') {
        callback(undefined);
      }
    }

    var items = pasteEvent.clipboardData.items;

    if (items == undefined) {
      if (typeof (callback) == 'function') {
        callback(undefined);
      }
    }

    for (var i = 0; i < items.length; i++) {
      // Skip content if not image
      if (items[i].type.indexOf('image') == -1) continue;
      // Retrieve image on clipboard as blob
      var blob = items[i].getAsFile();

      if (typeof (callback) == 'function') {
        callback(blob);
      }
    }
  }

  document.getElementById('textarea').addEventListener('paste', function(e) {
    retrieveImageFromClipboardAsBlob(e,function(file){
      var reader = new FileReader();
      reader.onload = function(event) {
        var contents = event.target.result;
        console.log("File contents: " + contents);
      };
      reader.onerror = function(event) {
        console.error("File could not be read! Code " + event.target.error.code);
      };
      reader.readAsDataURL(file);
    });

  });
</script>
</body>
</html>
